# 📡 数据源使用说明

## 数据源对比

| 数据源 | 特点 | 优势 | 适用场景 | 状态 |
|--------|------|------|---------|------|
| **💾 本地CSV** | Baostock历史数据 | 快速稳定、离线可用 | 历史回测、批量分析 | ✅ 可用 |
| **🌐 Ashare** | 腾讯/新浪实时数据 | 实时更新、免费 | 实时监控、日内分析 | ✅ 可用 |
| **📊 Tushare** | 专业金融数据 | 高质量、全面 | 专业研究、精确回测 | ✅ 可用 |
| **🔧 AKShare** | 开源在线数据 | 免费、多源 | 快速验证、探索性分析 | ✅ 可用 |

---

## 💾 本地CSV (Baostock)

### 特点
- **数据来源**: Baostock免费API
- **更新方式**: 增量更新脚本
- **数据范围**: 沪深A股全市场 (5600+)
- **存储位置**: `~/stock_data`

### 使用方法
1. 访问 **💾 AI数据管理**
2. 点击 **开始更新** (首次约13分钟)
3. 回测时选择 **本地CSV** 数据源

### 优势
✅ 快速稳定,不依赖网络  
✅ 支持批量回测  
✅ 历史数据完整

---

## 🌐 Ashare (实时数据)

### 特点
- **数据来源**: 腾讯财经/新浪财经
- **实时性**: 延迟15分钟
- **数据类型**: 日线、周线、月线、分钟线
- **文件位置**: `datafeed/Ashare.py`

### 使用方法
```python
from datafeed.Ashare import get_price

# 获取最新30日数据
df = get_price('518880.SH', frequency='1d', count=30)
```

### 优势
✅ 实时获取最新数据  
✅ 无需本地存储  
✅ 适合实时监控

---

## 📊 Tushare (专业版)

### 特点
- **Token**: `ad56243b601d82fd5c4aaf04b72d4d9d567401898d46c20f4d905d59`
- **数据质量**: 高质量专业数据
- **积分制**: 需要积分支持
- **文件位置**: `datafeed/tushare_loader.py`

### 使用方法
```python
from datafeed.tushare_loader import get_data_auto

# 自动识别类型获取数据
df = get_data_auto('600519.SH', start_date='20200101', end_date='20231231')
```

### API说明
- `get_stock_data()` - 获取股票数据
- `get_fund_data()` - 获取ETF基金数据
- `get_index_data()` - 获取指数数据
- `get_data_auto()` - 自动识别类型

### 优势
✅ 数据最准确  
✅ 覆盖全面(股票/基金/指数/期货)  
✅ 支持更多字段

### 注意事项
⚠️ 需要积分(每日500积分,注册送2000)  
⚠️ 积分不足需升级会员  
⚠️ 频繁调用可能触发限流

---

## 🔧 AKShare (开源在线)

### 特点
- **完全免费**: 无需注册token
- **多数据源**: 整合多个网站数据
- **实时更新**: 在线获取
- **文件位置**: `datafeed/akshare_loader.py`

### 使用方法
```python
from datafeed.akshare_loader import get_data_auto

# 自动识别类型获取数据
df = get_data_auto('600519.SH', start_date='2020-01-01', end_date='2023-12-31')
```

### API说明
- `get_stock_data()` - 获取A股数据
- `get_fund_data()` - 获取ETF数据
- `get_index_data()` - 获取指数数据
- `get_data_auto()` - 自动识别

### 优势
✅ 完全免费  
✅ 数据源丰富  
✅ 更新及时

### 注意事项
⚠️ 网络不稳定可能影响速度  
⚠️ 部分数据可能有延迟  
⚠️ 频繁调用可能被限制

---

## 🎯 选择建议

### 历史回测 → 本地CSV
- 稳定快速
- 适合批量测试
- 推荐用于策略开发

### 实时监控 → Ashare
- 实时性好
- 免费便捷
- 推荐用于日常监控

### 专业研究 → Tushare
- 数据最准确
- 字段最全面
- 推荐用于精确研究

### 快速验证 → AKShare
- 完全免费
- 在线获取
- 推荐用于探索分析

---

## 💡 使用技巧

### 1. 组合使用
- **开发阶段**: 本地CSV(快速迭代)
- **验证阶段**: Tushare/AKShare(数据准确性)
- **生产阶段**: Ashare(实时监控)

### 2. 数据备份
```bash
# 定期备份本地CSV数据
rsync -av ~/stock_data /backup/
```

### 3. 数据对比
```python
# 对比不同数据源的差异
from datafeed.tushare_loader import get_data_auto as ts_get
from datafeed.akshare_loader import get_data_auto as ak_get

df_ts = ts_get('600519.SH', '20230101', '20231231')
df_ak = ak_get('600519.SH', '2023-01-01', '2023-12-31')
```

---

## 🔧 安装依赖

```bash
# Tushare
pip install tushare

# AKShare
pip install akshare

# Baostock (已安装)
pip install baostock
```

---

## 📚 参考文档

- **Tushare**: https://tushare.pro/document/2
- **AKShare**: https://akshare.akfamily.xyz/
- **Baostock**: http://baostock.com/baostock/index.php

---

**更新时间**: 2025-10-28  
**版本**: v1.0

