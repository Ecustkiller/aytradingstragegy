# 📊 持仓监控左右分栏布局 - 设计说明

## 🎯 设计目标

将持仓监控界面改造为**左右分栏布局**，类似同花顺等专业软件的风格：
- **左侧**：股票列表，紧凑显示所有持仓股票
- **右侧**：详情和分时图，显示选中股票的完整信息
- **交互**：点击左侧股票，右侧丝滑切换显示

## ✨ 核心特点

### 1. 专业的左右分栏布局
```
┌─────────────────────────────────────────────────────────┐
│                    持仓监控                              │
├──────────────┬──────────────────────────────────────────┤
│              │                                          │
│  股票列表    │         详情 + 分时图                     │
│              │                                          │
│  ┌────────┐  │  ┌──────────────────────────────────┐   │
│  │平安银行│  │  │ 平安银行 (000001)                │   │
│  │000001  │  │  │ 当前价: 11.63  涨跌幅: +0.69%    │   │
│  │11.63   │  │  └──────────────────────────────────┘   │
│  │↑+0.69% │  │                                          │
│  └────────┘  │  ┌──────────────────────────────────┐   │
│              │  │ 持仓信息                          │   │
│  ┌────────┐  │  │ 成本价: 11.50  数量: 100         │   │
│  │上海贝岭│  │  └──────────────────────────────────┘   │
│  │600171  │  │                                          │
│  │33.24   │  │  ┌──────────────────────────────────┐   │
│  │↑+0.48% │  │  │ 分时图                            │   │
│  └────────┘  │  │ [专业分时图显示]                  │   │
│              │  └──────────────────────────────────┘   │
│              │                                          │
└──────────────┴──────────────────────────────────────────┘
```

### 2. 美观的股票卡片
- **未选中状态**：浅灰色背景，简洁清爽
- **选中状态**：渐变紫色背景，醒目突出
- **涨跌颜色**：红涨绿跌，一目了然
- **盈亏显示**：直接显示持仓盈亏比例

### 3. 丝滑的切换体验
- 点击左侧股票，右侧立即切换
- 无需展开/收起，直接显示
- 分时图自动加载，无需额外点击
- 流畅的视觉过渡效果

## 🎨 界面设计

### 左侧股票列表

#### 未选中状态
```
┌─────────────────────────┐
│ 平安银行                 │
│ 000001                  │
│ 11.63        ↑ +0.69%   │
│ 盈 +1.13%               │
└─────────────────────────┘
```

#### 选中状态（渐变紫色背景）
```
┌─────────────────────────┐
│ 🌟 平安银行              │
│ 000001                  │
│ 11.63        ↑ +0.69%   │
│ 盈 +1.13%               │
└─────────────────────────┘
```

### 右侧详情区域

#### 1. 实时行情指标
```
┌──────────┬──────────┬──────────┐
│ 当前价   │ 涨跌幅   │ 持仓盈亏 │
│ 11.63    │ +0.69%   │ +1.13%   │
│ +0.08    │          │ ¥113.00  │
└──────────┴──────────┴──────────┘
```

#### 2. 持仓信息（可展开）
```
📊 持仓信息
├─ 成本价: 11.50
├─ 持仓数量: 100
└─ 买入日期: 2025-11-11
```

#### 3. 操作按钮
```
┌──────────────┬──────────────┐
│ ✏️ 编辑持仓  │ 🗑️ 删除股票  │
└──────────────┴──────────────┘
```

#### 4. 分时图（自动显示）
```
📈 实时分时图
[连续的专业分时图]
```

## 🔧 技术实现

### 1. 左右分栏布局
```python
# 创建左右分栏（1:2比例）
left_col, right_col = st.columns([1, 2])

with left_col:
    # 左侧：股票列表
    for stock in stocks:
        display_stock_card(stock)

with right_col:
    # 右侧：详情和分时图
    if selected_stock:
        display_stock_details(selected_stock)
        display_intraday_chart(selected_stock)
```

### 2. 选中状态管理
```python
# 使用session_state保存选中的股票
if 'selected_stock' not in st.session_state:
    st.session_state.selected_stock = None

# 点击股票时更新选中状态
if st.button(f"选择 {stock_name}"):
    st.session_state.selected_stock = stock_code
    st.rerun()
```

### 3. 动态卡片样式
```python
# 根据选中状态应用不同样式
is_selected = (st.session_state.selected_stock == stock_code)

card_style = f"""
    background: {'渐变紫色' if is_selected else '浅灰色'};
    border: 2px solid {'紫色' if is_selected else '灰色'};
    box-shadow: {'强阴影' if is_selected else '弱阴影'};
"""
```

### 4. 自动显示分时图
```python
# 右侧自动显示选中股票的分时图
if st.session_state.selected_stock:
    selected_code = st.session_state.selected_stock
    display_intraday_chart(selected_code, stock_name)
```

## 📊 布局比例

### 左右分栏比例：1:2
- **左侧（33%）**：股票列表
  - 宽度适中，可显示完整信息
  - 支持滚动查看更多股票
  
- **右侧（67%）**：详情和分时图
  - 足够宽度显示分时图
  - 详细信息一目了然

### 响应式设计
- 大屏幕：1:2 比例，左右并排
- 中等屏幕：自动调整比例
- 小屏幕：自动堆叠显示

## 🎯 用户体验优化

### 1. 快速浏览
- 左侧列表紧凑显示所有股票
- 关键信息一目了然
- 无需展开即可查看涨跌

### 2. 深度查看
- 点击股票查看详细信息
- 分时图自动加载
- 无需额外操作

### 3. 高效操作
- 编辑、删除按钮就近显示
- 表单操作在右侧完成
- 不影响左侧列表浏览

### 4. 视觉反馈
- 选中状态明显突出
- 渐变背景美观专业
- 颜色区分清晰直观

## 🆚 对比优化前

| 特性 | 优化前 | 优化后 |
|------|--------|--------|
| 布局方式 | 上下堆叠 | 左右分栏 |
| 查看方式 | 展开/收起 | 点击切换 |
| 分时图显示 | 需要点击按钮 | 自动显示 |
| 浏览体验 | 上下滚动费劲 | 左右切换丝滑 |
| 信息密度 | 较低 | 较高 |
| 专业度 | 一般 | 专业（类似同花顺） |

## 💡 使用场景

### 场景1：快速浏览持仓
1. 查看左侧列表
2. 一眼看到所有股票涨跌
3. 快速定位关注的股票

### 场景2：深度分析个股
1. 点击左侧股票
2. 右侧显示详细信息
3. 查看实时分时图
4. 分析价格走势

### 场景3：对比多只股票
1. 依次点击不同股票
2. 右侧快速切换显示
3. 对比分时图走势
4. 发现板块联动

### 场景4：编辑持仓信息
1. 选中需要编辑的股票
2. 点击"编辑"按钮
3. 在右侧表单中修改
4. 保存后立即生效

## 🎨 视觉设计细节

### 1. 颜色方案
- **选中背景**：渐变紫色（#667eea → #764ba2）
- **未选中背景**：浅灰色（#f8f9fa）
- **边框颜色**：选中紫色，未选中灰色
- **文字颜色**：选中白色，未选中深灰

### 2. 阴影效果
- **选中状态**：`0 4px 12px rgba(102, 126, 234, 0.3)`
- **未选中状态**：`0 2px 4px rgba(0,0,0,0.1)`

### 3. 过渡动画
```css
transition: all 0.3s ease;
```
- 背景色过渡
- 边框过渡
- 阴影过渡

### 4. 圆角设计
```css
border-radius: 8px;
```
- 卡片圆角柔和
- 现代化设计风格

## 🚀 使用方法

### 1. 查看持仓
- 左侧显示所有持仓股票
- 关键信息一目了然

### 2. 选择股票
- 点击左侧股票卡片
- 或点击"选择"按钮

### 3. 查看详情
- 右侧自动显示详细信息
- 包括实时行情、持仓信息、分时图

### 4. 切换股票
- 点击其他股票
- 右侧丝滑切换显示

### 5. 编辑信息
- 点击"编辑"按钮
- 在右侧表单中修改
- 保存后立即生效

## 📝 注意事项

### 1. 初始状态
- 首次进入时未选中任何股票
- 右侧显示提示信息
- 引导用户点击左侧股票

### 2. 选中状态
- 选中状态会保持
- 刷新页面后需要重新选择
- 删除股票后自动取消选中

### 3. 分时图加载
- 选中股票后自动加载分时图
- 非交易时间可能无数据
- 加载失败会显示提示信息

### 4. 响应式适配
- 大屏幕体验最佳
- 小屏幕可能需要滚动
- 建议使用桌面浏览器

## 🎉 总结

### 核心优势
✅ **专业布局** - 类似同花顺的左右分栏设计  
✅ **丝滑切换** - 点击即切换，无需展开收起  
✅ **信息密集** - 左侧紧凑列表，右侧详细展示  
✅ **视觉美观** - 渐变背景，现代化设计  
✅ **操作高效** - 减少点击次数，提升效率  

### 适用场景
- 📊 日常持仓监控
- 📈 个股深度分析
- 🔍 多股对比研究
- ✏️ 持仓信息管理

### 技术特点
- 🎨 CSS渐变背景
- 🔄 Session状态管理
- 📱 响应式布局
- ⚡ 流畅的交互体验

---

**版本**: v3.0  
**更新时间**: 2025-11-11  
**状态**: ✅ 已完成

**下一步**: 重启应用，体验全新的左右分栏布局！🚀
